{% extends 'layout.html' %}

{% block title %}Resources{% endblock %}

{% block content %}
<section>
  <h1 style="margin-bottom:0.2em;">Training Resources</h1>
  <p style="color:#555; margin-bottom:1.5em;">Resources and links from training sessions with the Cambridgeshire Virtual School</p>
  {% if tag %}
    <h2 style="margin-bottom:1em;">Resources tagged with "{{ tag.name }}"</h2>
  {% endif %}

  {% if resources %}
    <div class="resources-container">
      {% for topic in resources %}
        <article class="resource-list-card">
          <div class="resource-list-title">
            <a href="{% url 'resources:page' slug=topic.slug %}">{{ topic.title }}</a>
          </div>
          <div class="resource-list-meta">
            {{ topic.date }} &middot; by {{ topic.author }}
          </div>
          <div class="resource-list-tags">
            {% for t in topic.tags.all %}
              <a class="tag-badge" href="{% url 'resources:resource_list_by_tag' t.slug %}">{{ t.name }}</a>
            {% empty %}
              <span style="color:#aaa;">No tags</span>
            {% endfor %}
          </div>
          {% if topic.body %}
            <div class="resource-list-body">{{ topic.body|truncatewords:30 }}</div>
          {% endif %}
        </article>
      {% endfor %}
    </div>
  {% else %}
    <p>No resources yet.</p>
  {% endif %}

  <div style="margin-top:2em;">
    {% include "pagination.html" with page=resources %}
  </div>
</section>
{% endblock %}
